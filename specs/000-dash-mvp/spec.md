# Spec: Code Monkeys Dash MVP (v0.1)

## Intent
Build a bootstrap dashboard that allows a solo operator (and later Nexus) to monitor the fleet and see “what’s real” via structured artifacts.

## Non-goals (bootstrap)
- No GitHub API integration
- No authentication / multi-user
- No realtime updates (manual refresh OK)
- No database (filesystem + JSON only)
- No automatic product discovery (manual registry file OK)

## User Stories
1) As the operator, I can see all products and their last run status.
2) As the operator, I can click into a product and see the last run’s evidence pack paths.
3) As the operator, I can see banana economy budget burn and whether the kill switch is enabled.

## Functional Requirements
- **FR-001**: Dash loads `dash/products.json` and lists products.
- **FR-002**: Dash loads `dash/runs/<product_id>/last_run.json` for each product.
- **FR-003**: Dash renders status, timestamps, summary, and evidence paths.
- **FR-004**: Dash renders banana economy counters.
- **FR-005**: Dash renders kill switch state + reason.
- **FR-006**: Dash renders PR wave state (stub OK).

## Acceptance Criteria
- AC-001: With fixture JSON files present, Dash renders the product list and details without errors.
- AC-002: If a run report is missing or malformed, Dash shows an explicit error state (no silent failure).
- AC-003: A “Bootstrap Proof” screenshot of the rendered UI is produced and stored under `runs/…/`.
- AC-004: JSON schema validation (or equivalent) exists for `products.json` and `last_run.json`.

## Owner & Authority *(mandatory)*
- **Owner**: Nexus Agent (default for portfolio); Human operator supervises via Dash.
- **Autonomy Level**: autonomous-with-review (bootstrap)
- **Escalation Triggers**:
  - missing/invalid run artifacts
  - repeated failure states across >3 products
  - kill switch enabled

## Budget & Stop Conditions *(mandatory)*
- **Budgets**:
  - Max PRs for MVP: 3
  - Max CI heal attempts per PR: 0 (bootstrap; no self-heal yet)
  - Dev time budget: 1–2 days equivalent
- **Stop Conditions**:
  - scope expansion beyond filesystem JSON + single-page UI
  - missing acceptance proofs / evidence plan
  - repeated test failures without a new hypothesis or change

## Constraints & Non-goals *(mandatory)*
### Constraints
- **C-001**: Runs locally on workstation; no external service dependencies.
- **C-002**: Must not require a DB in v0.1.
- **C-003**: No fake evidence: all claims must be backed by artifacts.

### Non-goals
- **NG-001**: No org management UI in v0.1.
- **NG-002**: No multi-tenant permissions.

## Invariants & Failure Modes *(when applicable)*
### Invariants
- **INV-001**: Dash must never crash on malformed input; it must render a failure state.

### Failure Modes
- **FM-001**: Missing JSON file → show explicit “Missing artifact” error.
- **FM-002**: Invalid JSON schema → show explicit “Invalid artifact” error with details.

## Security & Privacy *(when applicable)*
- **SEC-001**: Dash must not read secrets; evidence paths must avoid exposing secret files.
- **PRIV-001**: No telemetry in v0.1.

## Performance & Resource Bounds *(when relevant)*
- **PERF-001**: Dashboard loads within 1s for up to 50 products using fixture data.
- **RES-001**: Memory usage remains under 200MB.

## Rollout / Rollback *(mandatory when shipping)*
- Bootstrap: local-only `python -m http.server` allowed.
- Rollback: revert commit / restore previous JSON fixtures.

## Observability & Ops Notes *(mandatory when applicable)*
- Log all load/parse errors to console and optionally `dash.log`.
- “Runs” directory is the source-of-truth for evidence packs.

## Evidence Plan *(mandatory)*
- **EV-001**: Screenshot of Dash showing 1+ product entries rendered.
- **EV-002**: Fixture JSON committed under `dash/` (or generated by script).
- **EV-003**: JSON schema validation test output.
- **EV-004**: `README` instructions to run Dash locally.

## Traceability Map *(mandatory before ship)*
| Requirement | File/Component | Test Case | Status |
|-------------|----------------|-----------|--------|
| FR-001 | `dash/products.json` + UI loader | `tests/test_products_schema` | Pending |
| FR-002 | run loader | `tests/test_run_schema` | Pending |
| FR-003 | UI renderer | `tests/test_render_smoke` | Pending |
